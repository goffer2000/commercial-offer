<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <style>
    body {
      font-family: DejaVu Sans, sans-serif;
      font-size: 9pt;
      background: white;
      margin: 30px;
    }
    .logo img {
      width: 444px;
      height: 135px;
      object-fit: contain;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 8pt;
      table-layout: fixed;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 5px;
      text-align: left;
      vertical-align: top;
      word-wrap: break-word;
    }
    th {
      background: #eee;
      font-weight: bold;
    }
    .right {
      text-align: right;
    }
    .bold-note {
      margin-top: 15px;
      font-weight: bold;
      font-size: 9pt;
    }
    .section-title {
      font-weight: bold;
      margin-top: 20px;
      font-size: 9pt;
    }
    .desc {
      margin-top: 15px;
      font-size: 8pt;
    }
    /* Настройка ширины колонок */
    th:nth-child(6), td:nth-child(6) {
      width: 30%;
      /* 2.5 раза шире остальных */
    }
    th:nth-child(2), td:nth-child(2) {
      width: 40%;
    }
    th:nth-child(1), td:nth-child(1) {
      width: 5%;
    }
    th:nth-child(3), td:nth-child(3),
    th:nth-child(4), td:nth-child(4),
    th:nth-child(5), td:nth-child(5) {
      width: 7.5%;
    }
  </style>
</head>
<body>

<div class="logo">
  <img src="/static/logo.png" alt="ARMOURCOAT Логотип" />
</div>

<h2>ARMOURCOAT. Коммерческое предложение от {{ date_str }}</h2>
<p><strong>Адрес объекта:</strong> {{ address }}</p>
<p><strong>Наименование объекта:</strong> {{ object_name }}</p>
<p><strong>Площадь покрытия:</strong> {{ area }} м²</p>

<h3 class="section-title">Основной материал</h3>
<table>
  <tr>
    <th>№</th>
    <th>Описание</th>
    <th>Ед. изм</th>
    <th>Кол-во</th>
    <th>Цена, тг</th>
    <th>Сумма, тг</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Материал Armourcoat "<strong>{{ material_name }}</strong>"</td>
    <td>{% if material == "ISTRIA" %}кг{% else %}л{% endif %}</td>
    <td class="right">{{ mat_qty }}</td>
    <td class="right">{{ '{:,.2f}'.format(mat_price).replace(',', ' ').replace('.', ',') }}</td>
    <td class="right">{{ '{:,.2f}'.format(mat_cost).replace(',', ' ').replace('.', ',') }}</td>
  </tr>
  {% if aquawax_qty %}
  <tr>
    <td>2</td>
    <td>Доп. покрытие: Armourcoat AQUAWAX</td>
    <td>л</td>
    <td class="right">{{ aquawax_qty }}</td>
    <td class="right">59 000,00</td>
    <td class="right">{{ '{:,.2f}'.format(aquawax_cost).replace(',', ' ').replace('.', ',') }}</td>
  </tr>
  {% endif %}
</table>

{% if base_layer %}
<h3 class="section-title">Базовый слой</h3>
<table>
  <tr>
    <th>№</th>
    <th>Описание</th>
    <th>Ед. изм</th>
    <th>Кол-во</th>
    <th>Цена, тг</th>
    <th>Сумма, тг</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Базовый слой: Материал <strong>{{ base_layer }}</strong></td>
    <td>л</td>
    <td class="right">{{ base_qty }}</td>
    <td class="right">{{ '{:,.2f}'.format(base_price).replace(',', ' ').replace('.', ',') }}</td>
    <td class="right">{{ '{:,.2f}'.format(base_cost).replace(',', ' ').replace('.', ',') }}</td>
  </tr>
  {% if extra_qty %}
  <tr>
    <td>2</td>
    <td>Дополнительные расходные материалы</td>
    <td>компл</td>
    <td class="right">{{ extra_qty }}</td>
    <td class="right">12 000,00</td>
    <td class="right">{{ '{:,.2f}'.format(extra_cost).replace(',', ' ').replace('.', ',') }}</td>
  </tr>
  {% endif %}
  {% if primer_qty %}
  <tr>
    <td>3</td>
    <td>Грунтовка</td>
    <td>л</td>
    <td class="right">{{ primer_qty }}</td>
    <td class="right">2 500,00</td>
    <td class="right">{{ '{:,.2f}'.format(primer_cost).replace(',', ' ').replace('.', ',') }}</td>
  </tr>
  {% endif %}
</table>

<div class="desc">
  {% if base_layer in ['BaseColor Matt', 'BaseColor Satine'] %}
  <p><strong>«BaseColor»</strong> – слой основания на основе воды с превосходной адгезией и матовостью, которая представляет собой неотъемлемую часть систем декоративного покрытия «Perlata» и «Tactite».</p>
  {% endif %}
</div>
{% endif %}

{% if include_work %}
<h3 class="section-title">Работы</h3>
<table>
  <tr>
    <th>№</th>
    <th>Описание</th>
    <th>Ед. изм</th>
    <th>Кол-во</th>
    <th>Цена, тг</th>
    <th>Сумма, тг</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Работы по нанесению декоративного покрытия ARMOURCOAT</td>
    <td>кв.м.</td>
    <td class="right">{{ area }}</td>
    <td class="right">{{ '{:,.2f}'.format(work_price).replace(',', ' ').replace('.', ',') }}</td>
    <td class="right">{{ '{:,.2f}'.format(work_sum).replace(',', ' ').replace('.', ',') }}</td>
  </tr>
</table>
{% endif %}

<p class="bold-note">Для начала работ по колеровке и поставке необходима 100% предоплата стоимости всех материалов.</p>

<h3 class="section-title">ИТОГО:</h3>
<p><strong>{{ '{:,.2f}'.format(total).replace(',', ' ').replace('.', ',') }} тг</strong></p>

</body>
</html>
