<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Список коммерческих предложений</title>
</head>
<body>
  <h2>Найти предложения</h2>
  <form method="get">
    <input type="text" name="q" placeholder="Поиск по дате, объекту, адресу" value="{{ query }}">
    <button type="submit">Искать</button>
  </form>
  <hr>
  <table border="1" cellpadding="4">
    <tr>
      <th>Дата</th>
      <th>Объект</th>
      <th>Адрес</th>
      <th>Сумма</th>
      <th>Файл</th>
      <th>Удалить</th>
    </tr>
    {% for o in offers %}
    <tr>
      <td>{{ o.date }}</td>
      <td>{{ o.object_name }}</td>
      <td>{{ o.address }}</td>
      <td>{{ "{:,.2f}".format(o.total).replace(",", " ").replace(".", ",") }} тг</td>
      <td>{{ o.pdf_filename }}</td>
      <td>
        <form method="post" action="/delete/{{ o.id }}" onsubmit="return confirm('Удалить это предложение?')">
          <button type="submit">✖</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
</body>
</html>
